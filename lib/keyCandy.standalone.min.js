var DOMSmack=function(){var ArrProto=Array.prototype,nativeBind=Function.prototype.bind,breaker={};function __arrayify(obj,items,append){if(obj.prototype&&(!obj.length||!obj.splice)){var proto=obj.prototype;proto.splice=[].splice;proto.length=0}if(!items||!items.length)return;items=(append?__slice(obj):[]).concat(__slice(items));__each(items,function(item,idx){obj[idx]=item});obj.length=items.length}function __any(array,callback,context){var newFunc=ArrProto.some?function(array,callback){return ArrProto.some.call(array,callback,context)}:function(array,callback,context){var result=false;__each(array||[],function(val,idx,list){if(result||(result=callback.call(context,val,idx,list)))return breaker},context);return!!result};__any=newFunc;return newFunc(array,callback,context)}function __each(array,callback,context){var newFunc=typeof ArrProto.forEach=="function"?function(array,callback,context){ArrProto.forEach.call(array,callback,context)}:function(array,callback,context){for(var i=0,len=array.length;i<len;i++){if(i in array&&callback.call(context,array[i],i,array)===breaker)return}};__each=newFunc;return newFunc(array,callback,context)}function __indexOf(array,val){var newFunc=typeof ArrProto.indexOf==="function"?function(array,val){return ArrProto.indexOf.call(array,val)}:function(array,val){for(var i=0,j=array.length;i<j;i++){if(array[i]===val)return i}return-1};__indexOf=newFunc;return newFunc(array,val)}function __slice(obj,start,stop){return ArrProto.slice.call(obj,start,stop)}function __bind(obj,func){if(typeof func!=="function"||typeof func.call!=="function"){throw Error("func is not a function")}var bindArgs=__slice(arguments,2),finalBind;if(!finalBind){finalBind=func.bind&&nativeBind&&nativeBind===func.bind?function(bindArgs){bindArgs.unshift(obj);return nativeBind.apply(func,bindArgs)}:function(bindArgs){return function(){func.apply(obj,bindArgs.concat(__slice(arguments)))}}}return finalBind(bindArgs)}function __lc(string){return(""+string).toLowerCase()}function classRE(cls){return new RegExp("\\b"+cls+"\\b")}var __el_list=[],__el_evt_map={};function Api(selector){if(typeof selector==="string"){this.els=__slice(document.querySelectorAll(selector))}else if(selector instanceof Api||selector instanceof NodeList){this.els=__slice(selector)}else if(selector.nodeType&&selector.nodeType===1||selector===window||selector===document){this.els=[selector]}this.el=this.els[0];__arrayify(this,this.els)}var proto=Api.prototype;__arrayify(Api);function is(el,tag){var _is=false,_elTag=__lc(el.tagName),_lTag=__lc(tag),tagArray;if(~tag.indexOf(",")){tagArray=_lTag.split(/,\s*/g);for(var i=0,len=tagArray.length;i<len;i++){if(tagArray[i]===_elTag)return true;if(tagArray[i].indexOf(":")===0){if(tagArray[i].substr(1)===__lc(el.type))return true}}}return _lTag===_elTag}proto.is=function(tag){if(this.length===1)return is(this.el,tag);return __any(this.els,function(el){if(is(el,tag))isit=true},this)};function bind(el,type,callback){var newFunc=el.addEventListener?function(el,type,callback){el.addEventListener(type,callback,false);return callback}:function(el,type,callback){var new_callback=function(){callback.call(el,window.event)};el.attachEvent("on"+type,new_callback);return new_callback};bind=newFunc;return newFunc(el,type,callback)}proto.bind=function(type,callback){var elKey;__each(this.els,function(el,idx){if(__indexOf(__el_list,el)<0)__el_list.push(el);elKey=__indexOf(__el_list,el);__el_evt_map[elKey]=__el_evt_map[elKey]||{};__el_evt_map[elKey][type]=__el_evt_map[elKey][type]||[];if(!~__indexOf(__el_evt_map[elKey][type],callback)){bind(el,type,callback);__el_evt_map[elKey][type].push(callback)}},this);return this};function unbind(el,type,handle){var newFunc=document.removeEventListener?function(el,type,handle){if(el.removeEventListener)el.removeEventListener(type,handle,false)}:function(el,type,handle){if(el.detachEvent)el.detachEvent("on"+type,handle)};unbind=newFunc;newFunc(el,type,handle)}proto.unbind=function(type,handle){__each(this.els,function(el){unbind(el,type,handle)});return this};function trigger(el,evt){if(evt in el)el[evt]();return this}proto.trigger=function(evt){__each(this.els,function(el){trigger(el,evt)});return this};proto.one=function(type,callback){__each(this.els,function(el){var callback=__bind(el,callback),handle,wrapper=function(event){callback(event);unbind(el,type,handle)};handle=bind(el,type,wrapper)})};var propertyFix={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},getAttributeParamFix={width:1,height:1,src:1,href:1};function hasGetAttribute(){var div=document.createElement("div"),newFunc,hasGetAttr;div.innerHTML='<a href="#"></a>';if(div.childNodes[0].getAttribute("href")==="#"){newFunc=function(){return true};hasGetAttribute=newFunc;return true}div=null;newFunc=function(){return false};hasGetAttribute=newFunc;return false}function setAttr(el,attr,val){var newFunc=hasGetAttribute()?function(el,attr,val){return el.setAttribute(attr,val)}:function(el,attr,val){if(propertyFix[attr])attr=propertyFix[attr];if(attr==="value"&&element.nodeAttr==="BUTTON"){return element.getAttributeNode(attr).nodeValue=value}return element.setAttribute(attr,value)};setAttr=newFunc;return newFunc(el,attr,val)}function getAttr(el,attr){var newFunc=hasGetAttribute()?function(el,attr){return el.getAttribute(attr)}:function(el,attr){if(propertyFix[attr])attr=propertyFix[attr];if(getAttributeParamFix[attr])return el.getAttribute(attr,2);if(attr==="value"&&el.nodeName==="BUTTON"){return el.getAttributeNode(attr).nodeValue}return el.getAttribute(attr)};getAttr=newFunc;return newFunc(el,attr)}function removeAttr(el,attr){var newFunc=hasGetAttribute()?function(el,attr){if(!el.nodeType||!~"19".indexOf(""+el.nodeType))return;setAttr(el,attr,"");el.removeAttributeNode(el.getAttributeNode(attr))}:function(el,attr){el.removeAttribute(attr)};removeAttr=newFunc;return newFunc(el,attr)}proto.attr=function(name,value){if(value===undefined)return getAttr(this.el,name);__each(this.els,function(el){if(value===null){removeAttr(el,name)}else{setAttr(el,name,value)}});return this};function prop(el,name,value){var prop=propertyFix[name]?propertyFix[name]:name;if(prop in el){if(typeof value===undefined)return el[prop];el[prop]=value;return this}}proto.prop=function(name,value){if(value===undefined)return prop(this.el,name);__each(this.els,function(el){prop(el,name,value)},this);return this};function classRE(cls){return new RegExp("\\b"+cls+"\\b")}function hasClass(el,cls){return classRE(cls).test(el.className)}proto.hasClass=function(cls){return __any(this.els,function(el){return hasClass(el,cls)},this)};function addClass(el,cls){var classList;if(!hasClass(el,cls)){classList=(el.className||"").split(/\s+/g);classList.push(cls);el.className=classList.join(" ")}}proto.addClass=function(cls){__each(this.els,function(el){addClass(el,cls)},this);return this};function removeClass(el,cls){el.className=el.className.replace(classRE(cls),"").replace(/^\s+|\s+$/g,"")}proto.removeClass=function(cls){__each(this.els,function(el){removeClass(el,cls)},this);return this};function toggleClass(el,cls){return hasClass(el,cls)?removeClass(el,cls):addClass(el,cls)}proto.toggleClass=function(cls){__each(this.els,function(el){toggleClass(el,cls)});return this};proto.html=function(html){__each(this.els,function(el){el.innerHTML=html});return this};function __init(selector){return new Api(selector)}return __init}();var KEYCANDY_DOM_LIB=DOMSmack;KeyCandy=function($,undefined){var agent=navigator.userAgent,os=/Linux|Windows|Macintosh/.exec(agent).toString().toLowerCase(),browser=agent.indexOf("WebKit")>-1?"webkit":/Gecko|MSIE|Opera/.exec(agent).toString().toLowerCase(),os_browser_map={macintosh:91,linux:17,windows:17},target,_class="keycandy",_remove_class="removeClass",_default_parent="body",_control_key=os_browser_map[os]?os_browser_map[os]:17,_req_control_key=false,_valid_mod_keys={"⇧":16,shift:16,option:18,"⌥":18,alt:18,ctrl:17,control:17,command:91,"⌘":91},_mod_key="alt",_active_mods={16:false,17:false,18:false,91:false},attr_key_map={windows:"ctrl",linux:"ctrl",macintosh:String.fromCharCode(parseInt("2318",16))},handle_keydown=function(event){var _target=event.target,$class_target=$(target||_default_parent),_tag=_target.tagName.toLowerCase(),$target=$(_target),_code=event.keyCode,_accesskey_event=_active_mods[_control_key]||!_req_control_key,_valid_accesskey_code=_code>47&&_code<58||_code>64&&_code<91||_code>96&&_code<123,_selector=_valid_accesskey_code?'[accesskey="'+String.fromCharCode(_code)+'"]':null,$el=_selector?$(_selector):null,_old_idx,_typeable,_click_link=function(link){var cancelled=false;if(document.createEvent){var event=document.createEvent("MouseEvents");event.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);cancelled=!link.dispatchEvent(event)}else if(link.fireEvent){cancelled=!link.fireEvent("onclick")}if(!cancelled&&link.href)window.location=link.href};if(_code==93||_code==224)_code=91;if(_code==17&&window.opera&&_control_key==91&&event.ctrlKey===false)_code=91;if(_active_mods[_code]!==undefined)_active_mods[_code]=true;_typeable=(/^(sel|tex)/.test(_tag)||_tag==="input"&&/^(tex|pas|ema|sea|tel|url|dat)/.test(_target.type))&&!_active_mods[_valid_mod_keys[_mod_key]];if(_code===_control_key&&!_typeable){$class_target.toggleClass(_class)}else{if(_accesskey_event&&!_typeable){if(_valid_accesskey_code){if($el.length){$el=$el.is("label")?$("#"+$el.attr("for")):$el;var el=$el[0],el_tag=el.tagName.toLowerCase();var _action=$el.is(":text, :password, textarea, select")?"focus":"click";if(el_tag=="a"&&el.href){_click_link(el)}else if(el_tag=="select"&&browser=="gecko"&&_tag!="select"){!function(el,_idx){setTimeout(function(){el.selectedIndex=_idx},0)}(el,el.selectedIndex)}event.stopPropagation();event.preventDefault();$el.trigger(_action)}}$class_target[_remove_class](_class)}}},unset_modkey=function(event){var _code=event.keyCode;if(_code==93||_code==224)_code=91;if(window.opera&&_code==17&&event.ctrlKey===false)_code=91;if(_code in _active_mods){_active_mods[_code]=false}};return{version:"1.0.1",init:function(opt){if(opt){if(opt.ctrlKey)_control_key=opt.ctrlKey;if(opt.reqCtrlKey)_req_control_key=opt.reqCtrlKey;if(opt.modKey&&_valid_mod_keys[opt.modKey])_mod_key=opt.modKey;if(opt.tooltipClass)_class=opt.tooltipClass;if(opt.domLib)$=opt.domLib;target=opt.parent||_default_parent}else{target=_default_parent}$(browser=="msie"?document:window).bind("keydown",handle_keydown).bind("keyup",unset_modkey);$(target).bind("click",function(){$(this)[_remove_class](_class)}).attr("data-kchint","Press ["+attr_key_map[os]+"] to hide tooltips.")},os:os,browser:browser}}(window.KEYCANDY_DOM_LIB||window.$);